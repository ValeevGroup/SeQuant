f{a1;i1} - f{i2;i1} t{a1;i2} 


=================================================
Plain Text
=================================================
Declare index i_1
Declare index i_2
Declare index a_1

Declare tensor I[a_1, i_1]
Declare tensor f[i_2, i_1]
Declare tensor f[a_1, i_1]
Declare tensor t[a_1, i_2]

Create I[a_1, i_1] and initialize to zero
Load f[i_2, i_1]
Load t[a_1, i_2]
Compute I[a_1, i_1] += -1 f[i_2, i_1] t[a_1, i_2]
Unload t[a_1, i_2]
Unload f[i_2, i_1]
Load f[a_1, i_1]
Compute I[a_1, i_1] += f[a_1, i_1]
Unload f[a_1, i_1]
Persist I[a_1, i_1]

=================================================
Python (einsum)
=================================================
import numpy as np
import os

I_vo = np.zeros((nvirt, nocc), order='F')
f_oo = np.load('f_oo.npy')
t_vo = np.load('t_vo.npy')
I_vo += -1 * np.einsum('ia,bi->ba', f_oo, t_vo, optimize=True)
del t_vo
del f_oo
f_vo = np.load('f_vo.npy')
I_vo += np.einsum('ai->ai', f_vo, optimize=True)
del f_vo
np.save('I_vo.npy', I_vo)

=================================================
