section test_section:
R2u{a1,a2;i1,i2} = A{a1;i1} A{a2;i2}
R2{a1,a2;i1,i2} = R2u{a1,a2;i1,i2} + R2u{a2,a1;i1,i2}

=================================================
Plain Text
=================================================
Declare index i_1
Declare index i_2
Declare index a_1
Declare index a_2

section test_section(tensor A[a_1, i_1], tensor R2[a_1, a_2, i_1, i_2], tensor R2u[a_1, a_2, i_1, i_2])
  Create R2u[a_1, a_2, i_1, i_2] and initialize to zero
  Load A[a_1, i_1]
  Compute R2u[a_1, a_2, i_1, i_2] += A[a_1, i_1] A[a_2, i_2]
  Unload A[a_1, i_1]
  Persist R2u[a_1, a_2, i_1, i_2]

  Create R2[a_1, a_2, i_1, i_2] and initialize to zero
  Load R2u[a_1, a_2, i_1, i_2]
  Compute R2[a_1, a_2, i_1, i_2] += R2u[a_1, a_2, i_1, i_2]
  Compute R2[a_1, a_2, i_1, i_2] += R2u[a_2, a_1, i_1, i_2]
  Unload R2u[a_1, a_2, i_1, i_2]
  Persist R2[a_1, a_2, i_1, i_2]
end section

=================================================
